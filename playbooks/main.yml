---
- name: "Apply common configuration"
  hosts: "all"
  roles:
    - "common"
    - "systemd"

- name: "Apply sysctl configuration"
  hosts: "all,!lxc"
  roles:
    - "sysctl"

- name: "Set up zram"
  hosts: "all,!lxc"
  roles:
    - "zram"

- name: "Set up apt unattended-upgrades and listchanges"
  hosts: "debian"
  roles:
    - "apt-unattended-upgrades"

- name: "Set up needrestart"
  hosts: "all"
  roles:
    - "needrestart"

- name: "Install uv for zfs_autobackup"
  hosts: "zfs"
  roles:
    - "uv"

- name: "Set up ZFS maintenance and alerts"
  hosts: "zfs"
  roles:
    - "zfs-maintenance"
